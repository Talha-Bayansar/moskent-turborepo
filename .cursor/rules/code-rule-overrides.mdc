---
alwaysApply: true
---

üìò Cursor AI ‚Äî Custom Coding Rules & Overrides Context
Use the following rules as authoritative overrides when generating code for this project.
These rules correct outdated model assumptions and enforce project‚Äëspecific conventions.

1. Shadcn (Base UI) Component Rules
   Shadcn in this project is based on Base UI, not Radix UI.
   Therefore:
   ‚ùå Do NOT use asChild props
   This is invalid:
   <Component asChild>
   <ChildComponent />
   </Component>

‚úÖ Instead, use the render prop
Correct usage:
<Component render={<ChildComponent />} />

This applies to all shadcn components that previously used asChild in Radix‚Äëbased versions.

2. Component Composition Rules

- Prefer render props over asChild or slot patterns.
- Avoid passing JSX children when the component expects a render prop.

3. TanStack Query Rules

- All queries must use module‚Äëscoped query keys from hooks/keys.ts.
- Never hardcode query keys inline.
- Mutations must invalidate only the relevant module keys.
- Use prefetchQuery in loaders for SSR.
- Use dehydrate + hydration provider for client hydration.

4. TanStack Start Rules

- All routes must live under src/routes/.
- Providers must live under src/providers/.
- Server functions (loaders/actions) must not contain UI logic.
- Client components must not import server‚Äëonly modules.

5. Directives rules

- This is a tanstack start project so we don't use Next.js like directives like "use client" or "use server"

6. Zod validation rules

- The newest version of zod use z.email() instead of z.string().email(), so use the newer syntax as the previous one is deprecated.

7. Paraglide JS Translation Key Rules

- All translation keys MUST use flat keys with snake_case format (lowercase with underscores).
- ‚ùå Do NOT use nested keys or dot notation
  This is invalid:
  ```json
  {
    "auth": {
      "email": {
        "label": "Email"
      }
    }
  }
  ```
  Or:
  ```json
  {
    "auth.email.label": "Email"
  }
  ```

‚úÖ Instead, use flat snake_case keys
Correct usage:
```json
{
  "auth_email_label": "Email",
  "auth_password_label": "Password",
  "pages_dashboard_title": "Dashboard"
}
```

- Import messages using: `import { m } from "~/paraglide/messages"`
- Access messages using: `m.auth_email_label()` (not `m["auth.email.label"]()`)
- Keep keys descriptive but concise, using snake_case throughout
- Group related keys by prefix (e.g., `auth_*`, `pages_*`, `app_*`) but keep them flat